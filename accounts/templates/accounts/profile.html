{% extends "base.html" %} {% load static %} {% block title %}User Profile -
Postify{% endblock %} {% block css_files %}
<link rel="stylesheet" href="{% static 'accounts/profile.css' %}" />
<script src="{% static 'accounts/profile.js' %}" defer></script>
{% endblock %} {% block content %} {% if user.is_authenticated %}
<div class="profile-page-container">
  <div class="profile-card">
    <div id="view-mode">
      <div class="profile-header">
        <div class="profile-info-section">
          <div class="profile-avatar">
            {% if user.profile.get_avatar_data_url %}
            <img src="{{ user.profile.get_avatar_data_url }}" alt="Avatar" />
            {% else %}
            <img
              src="https://ui-avatars.com/api/?name={{ user.get_full_name|urlencode }}&size=100&background=1e78ff&color=fff"
              alt="Avatar"
            />
            {% endif %}
          </div>
          <div class="profile-info">
            <h1 class="profile-name">
              {{ user.get_full_name|default:"User" }}
            </h1>
            <div class="profile-metadata">
              <div class="metadata-item">
                <svg
                  class="metadata-icon"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                  ></path>
                  <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                <span>{{ user.email }}</span>
              </div>
              <div class="metadata-item">
                <svg
                  class="metadata-icon"
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="16" y1="2" x2="16" y2="6"></line>
                  <line x1="8" y1="2" x2="8" y2="6"></line>
                  <line x1="3" y1="10" x2="21" y2="10"></line>
                </svg>
                <span>Joined {{ user.date_joined|date:"F Y" }}</span>
              </div>
            </div>
          </div>
        </div>
        <div class="profile-actions">
          <button class="btn-edit-profile" id="btn-edit">
            <svg
              class="btn-icon"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"
              ></path>
              <path
                d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"
              ></path>
            </svg>
            Edit Profile
          </button>
          <a href="{% url 'account_logout' %}" class="btn-logout">
            <svg
              class="btn-icon"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16 17 21 12 16 7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Logout
          </a>
        </div>
      </div>

      <!-- Bio/Description -->
      <div class="profile-bio">
        <p>{{ user.profile.bio|default:"No bio added yet." }}</p>
      </div>

      <!-- Statistics Row -->
      <div class="profile-stats">
        <div class="stat-item">
          <svg
            class="stat-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M9 5H2v14h7V5z"></path>
            <path d="M16 3h-6v18h6V3z"></path>
            <path d="M22 10h-6v11h6V10z"></path>
          </svg>
          <div class="stat-value">1</div>
          <div class="stat-label">Posts</div>
        </div>
        <div class="stat-item">
          <svg
            class="stat-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
            ></path>
          </svg>
          <div class="stat-value">8</div>
          <div class="stat-label">Comments</div>
        </div>
        <div class="stat-item">
          <svg
            class="stat-icon"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>
          <div class="stat-value">1,243</div>
          <div class="stat-label">Total Views</div>
        </div>
      </div>
    </div>

    <div id="edit-mode" style="display: none">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="edit-profile-header">
          <div class="profile-avatar">
            {% if user.profile.get_avatar_data_url %}
            <img
              src="{{ user.profile.get_avatar_data_url }}"
              alt="Avatar"
              id="avatar-preview"
            />
            {% else %}
            <img
              src="https://ui-avatars.com/api/?name={{ user.get_full_name|urlencode }}&size=100&background=1e78ff&color=fff"
              alt="Avatar"
              id="avatar-preview"
            />
            {% endif %}
          </div>
        </div>

        <div class="form-group">
          <label for="{{ form.name.id_for_label }}">Name</label>
          {{ form.name }}
        </div>

        <div class="form-group">
          <label for="{{ form.bio.id_for_label }}">Bio</label>
          {{ form.bio }}
        </div>

        <div class="form-group">
          <label for="{{ form.avatar_file.id_for_label }}"
            >Profile Picture</label
          >
          {{ form.avatar_file }}
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-save">Save Changes</button>
          <button type="button" class="btn-cancel" id="btn-cancel">
            Cancel
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% else %}
<div class="profile-page-container">
  <div class="profile-card" style="text-align: center">
    <p>
      Please <a href="{% url 'login' %}" style="color: #1e78ff">login</a> to
      view your profile.
    </p>
  </div>
</div>
{% endif %} {% endblock %}
